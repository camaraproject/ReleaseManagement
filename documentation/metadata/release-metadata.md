# The `release-metadata.yaml` File

This document explains the generated `release-metadata.yaml` file.

## Purpose

The `release-metadata.yaml` file is the **authoritative record** for a release:

- Records the exact parameters of a release attempt
- Captures the source commit SHA
- Contains calculated API versions with extensions
- Provides resolved dependency information

This file is generated by automation. Do not edit it manually.

## Location

| Location | When |
|----------|------|
| Snapshot branch | Created during snapshot |
| Release tag | Preserved permanently |

The file is never present on `main`.

## Structure

```yaml
repository:
  repository_name: DeviceLocation
  release_tag: r4.1
  release_type: pre-release-rc
  release_date: 2026-01-17T14:30:00Z
  src_commit_sha: abcd1234efgh5678ijkl9012mnop3456qrst7890

dependencies:
  commonalities_release: "r4.2 (1.2.0-rc.1)"
  identity_consent_management_release: "r4.3 (1.1.0)"

apis:
  - api_name: location-verification
    api_version: 3.2.0-rc.2
    api_title: "Location Verification"
```

## Key Fields

| Field | Description | Set when |
|-------|-------------|----------|
| `src_commit_sha` | Source commit from which snapshot was created | Snapshot creation |
| `release_tag` | Release number (e.g., `r4.1`) | Snapshot creation |
| `release_date` | Timestamp of draft creation | Draft creation |
| `api_version` | Complete version with extension (e.g., `3.2.0-rc.2`) | Snapshot creation |
| `dependencies` | Release tags with resolved versions | Snapshot creation |

## Differences from `release-plan.yaml`

| Aspect | `release-plan.yaml` | `release-metadata.yaml` |
|--------|---------------------|------------------------|
| Purpose | Declares intent | Records reality |
| Location | `main` branch | Snapshot branch / tag |
| Edited by | Codeowners | Automation |
| Version extensions | Not included | Calculated |
